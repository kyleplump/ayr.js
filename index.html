<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
    <script type="module">
      import { RComponent } from './rcomponent.js'

      RComponent({
        root: '#comp1',
        state: {
          counter: 0,
        },
        effects: function() {

          return {
            updateCounter: () => {
              this.state.counter  = this.state.counter + 1;
            }
          }
        },
      })

      RComponent({
        root: '#comp2',
        state: {
          innerCounter: 100
        },
        effects: function() {
          return {
            decrementCounter: () => {
              this.state.innerCounter = this.state.innerCounter - 1;
            }
          }
        }
      })

      RComponent({
        root: '#innercomponent',
        state: {
          value: 2
        },
        effects: function() {
          return {
            double: () => {
              this.state.value = this.state.value * 2
            }
          }
        }
      })

    </script>
  </head>
  <body id="body">
   <div id='comp1'>
    <button id="btn" r-click="{updateCounter}">increment</button>
    <p>
      Counter value:
      <span id="test" r-data="{counter}" />
      <p id="innercomponent">
        <button r-click="{double}">double</button>
        <span r-data="{value}" />
      </p>
    </p>
   </div>

    <div id='comp2'>
      <button id="btn" r-click="{decrementCounter}">decrement</button>
      <p>
        Inner counter value:
        <span r-data="{innerCounter}">
        </span>
      </p>
    </div>
  </body>
</html>
