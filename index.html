<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
    <script type="module">
      import { AC } from './src/component.js'

      AC({
        root: '#comp1',
        state: {
          counter: 1,
        },
        effects: function() {

          return {
            updateCounter: () => {
              this.state.counter  = this.state.counter + 1;
            }
          }
        },
        dependants: function() {
          return {
            doubledCounter: (e) => {
              return this.state.counter * 2
            },
            tripledCounter: () => {
              return this.state.counter * 3
            }
          }
        }
      })

      AC({
        root: '#comp2',
        state: {
          input: '',
          secret: 'this is public value'
        },
        effects: function() {
          return {
            mirrorInput: (e) => {
              console.log('in calback: ', e)
              this.state.input = e.target.value;
            },
            revealSecret: () => {
              this.state.secret = 'SSHHHHHH! SECRET!'
            },
            hideSecret: () => [
              this.state.secret = 'this is public value'
            ]
          }
        }
      })

    </script>
  </head>
  <body id="body">
   <div id='comp1'>
    <button id="btn" y-click="{updateCounter}">increment</button>
    <p>
      Counter value:
      <span id="test" y-data="{counter}"></span>
      doubled:
      <span y-data="{doubledCounter}"></span>
      tripled:
      <span y-data="{tripledCounter}"></span>
    </p>
   </div>

    <div id='comp2'>
      <input y-keyup="{mirrorInput}" type="text" />
      <p>
        Your input is: <span y-data="{input}"></span>
      </p>
      <p y-mouseover="{revealSecret}" y-mouseout="{hideSecret}" style="background-color: lightblue;">
        Message:       <span y-data="{secret}"></span>
      </p>
    </div>
  </body>
</html>
